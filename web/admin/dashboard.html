<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTP Service - Admin Dashboard</title>
    <link rel="stylesheet" href="static/css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/socket.io-client@4/dist/socket.io.min.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-content">
                <h1>üîê OTP Service Admin Dashboard</h1>
                <div class="header-controls">
                    <span class="connection-status" id="connectionStatus">üî¥ Disconnected</span>
                    <button class="refresh-btn" id="refreshBtn">üîÑ Refresh</button>
                    <button class="settings-btn" id="settingsBtn">‚öôÔ∏è Settings</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="dashboard-main">
            <!-- Real-time Statistics Cards -->
            <section class="stats-grid">
                <div class="stat-card">
                    <div class="stat-header">
                        <h3>üéØ Active OTPs</h3>
                        <span class="stat-trend positive" id="activeOtpTrend">+12%</span>
                    </div>
                    <div class="stat-value" id="activeOtps">1,234</div>
                    <div class="stat-subtitle">Currently valid</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <h3>‚úÖ Success Rate</h3>
                        <span class="stat-trend positive" id="successRateTrend">+2.3%</span>
                    </div>
                    <div class="stat-value" id="successRate">98.7%</div>
                    <div class="stat-subtitle">Last 24 hours</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <h3>‚ö° Avg Response Time</h3>
                        <span class="stat-trend positive" id="responseTimeTrend">-5ms</span>
                    </div>
                    <div class="stat-value" id="avgResponseTime">23ms</div>
                    <div class="stat-subtitle">P95 latency</div>
                </div>

                <div class="stat-card">
                    <div class="stat-header">
                        <h3>üö¶ Rate Limited</h3>
                        <span class="stat-trend negative" id="rateLimitTrend">+15</span>
                    </div>
                    <div class="stat-value" id="rateLimited">47</div>
                    <div class="stat-subtitle">Last hour</div>
                </div>
            </section>

            <!-- Charts Section -->
            <section class="charts-section">
                <div class="chart-container">
                    <h3>üìä OTP Operations Timeline</h3>
                    <canvas id="operationsChart" width="400" height="200"></canvas>
                </div>

                <div class="chart-container">
                    <h3>üéØ Success vs Failure Rate</h3>
                    <canvas id="successChart" width="400" height="200"></canvas>
                </div>
            </section>

            <!-- Real-time Activity Feed -->
            <section class="activity-section">
                <div class="activity-header">
                    <h3>üîÑ Real-time Activity Feed</h3>
                    <div class="activity-controls">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="success">Success</button>
                        <button class="filter-btn" data-filter="failure">Failures</button>
                        <button class="filter-btn" data-filter="rate-limit">Rate Limits</button>
                    </div>
                </div>
                <div class="activity-feed" id="activityFeed">
                    <!-- Real-time activities will be populated here -->
                </div>
            </section>

            <!-- System Health -->
            <section class="health-section">
                <div class="health-header">
                    <h3>üè• System Health</h3>
                </div>
                <div class="health-grid">
                    <div class="health-item">
                        <div class="health-indicator healthy" id="apiHealthIndicator"></div>
                        <div class="health-details">
                            <h4>API Service</h4>
                            <p class="health-status" id="apiHealthStatus">Healthy</p>
                            <p class="health-uptime" id="apiUptime">Uptime: 99.9%</p>
                        </div>
                    </div>

                    <div class="health-item">
                        <div class="health-indicator healthy" id="redisHealthIndicator"></div>
                        <div class="health-details">
                            <h4>Redis Cluster</h4>
                            <p class="health-status" id="redisHealthStatus">Healthy</p>
                            <p class="health-uptime" id="redisUptime">Connections: 127/200</p>
                        </div>
                    </div>

                    <div class="health-item">
                        <div class="health-indicator warning" id="memoryHealthIndicator"></div>
                        <div class="health-details">
                            <h4>Memory Usage</h4>
                            <p class="health-status" id="memoryHealthStatus">Warning</p>
                            <p class="health-uptime" id="memoryUsage">Usage: 78.5%</p>
                        </div>
                    </div>

                    <div class="health-item">
                        <div class="health-indicator healthy" id="cpuHealthIndicator"></div>
                        <div class="health-details">
                            <h4>CPU Usage</h4>
                            <p class="health-status" id="cpuHealthStatus">Healthy</p>
                            <p class="health-uptime" id="cpuUsage">Usage: 23.4%</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚öôÔ∏è Dashboard Settings</h2>
                <span class="close" id="closeModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="setting-group">
                    <label>Refresh Interval (seconds):</label>
                    <select id="refreshInterval">
                        <option value="1">1 second</option>
                        <option value="5" selected>5 seconds</option>
                        <option value="10">10 seconds</option>
                        <option value="30">30 seconds</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label>Chart Update Interval (seconds):</label>
                    <select id="chartInterval">
                        <option value="5">5 seconds</option>
                        <option value="10" selected>10 seconds</option>
                        <option value="30">30 seconds</option>
                        <option value="60">1 minute</option>
                    </select>
                </div>
                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="enableNotifications" checked>
                        Enable System Notifications
                    </label>
                </div>
                <div class="setting-group">
                    <label>
                        <input type="checkbox" id="enableSounds" checked>
                        Enable Alert Sounds
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" id="saveSettings">Save Settings</button>
                <button class="btn-secondary" id="cancelSettings">Cancel</button>
            </div>
        </div>
    </div>

    <script src="static/js/dashboard.js"></script>
</body>
</html>